<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube App</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .upload-form { background: #f5f5f5; padding: 20px; margin-bottom: 30px; border-radius: 8px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #ff0000; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        .videos-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .video-card { border: 1px solid #ddd; border-radius: 8px; padding: 15px; }
        .video-thumbnail { width: 100%; height: 180px; background: #eee; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>YouTube App</h1>
        
        <div class="upload-form">
            <h2>–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ</h2>
            <form id="uploadForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                    <input type="text" id="title" name="title" required>
                </div>
                <div class="form-group">
                    <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    <textarea id="description" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="author">–ê–≤—Ç–æ—Ä:</label>
                    <input type="text" id="author" name="author" required>
                </div>
                <div class="form-group">
                    <label for="video">–í–∏–¥–µ–æ —Ñ–∞–π–ª:</label>
                    <input type="file" id="video" name="video" accept="video/*" required>
                </div>
                <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            </form>
        </div>
        
        <h2>–í–∏–¥–µ–æ</h2>
        <div id="videosList" class="videos-grid">
            <!-- –í–∏–¥–µ–æ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
        </div>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        loadVideos();
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏
        document.getElementById('uploadForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            
            try {
                const response = await fetch('/api/v1/videos', {
                    method: 'POST',
                    body: formData
                });
                
                if (response.ok) {
                    alert('–í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!');
                    this.reset();
                    loadVideos();
                } else {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∏–¥–µ–æ');
                }
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        });
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –≤–∏–¥–µ–æ
        async function loadVideos() {
            try {
                const response = await fetch('/api/v1/videos');
                const videos = await response.json();
                
                const videosList = document.getElementById('videosList');
                videosList.innerHTML = '';
                
                videos.forEach(video => {
                    const videoCard = document.createElement('div');
                    videoCard.className = 'video-card';
                    videoCard.innerHTML = `
                        <div class="video-thumbnail">
                            üìπ ${video.title}
                        </div>
                        <h3>${video.title}</h3>
                        <p>${video.author}</p>
                        <p>üëÅÔ∏è ${video.views} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</p>
                        <p>${new Date(video.created_at).toLocaleDateString()}</p>
                    `;
                    videosList.appendChild(videoCard);
                });
            } catch (error) {
                console.error('Error loading videos:', error);
            }
        }
    </script>
</body>
</html>